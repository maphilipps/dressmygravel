# CLAUDE.md
<!-- Generated by Claude Conductor v1.1.2 -->

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Critical Context (Read First)
- **Tech Stack**: Next.js 14, TypeScript, Shadcn/ui, Tailwind CSS
- **Main File**: To be created - Next.js application
- **Core Mechanic**: Weather-based clothing recommendations for gravel cyclists
- **Key Integration**: OpenWeatherMap API, Google Analytics 4, Affiliate system
- **Platform Support**: Web (PWA), Mobile-responsive
- **DO NOT**: Push sensitive data (API keys, tokens) to repository

## Session Startup Checklist
**IMPORTANT**: At the start of each session, check these items:
1. **Check TASKS.md** - Look for any IN_PROGRESS or BLOCKED tasks from previous sessions
2. **Review recent JOURNAL.md entries** - Scan last 2-3 entries for context
3. **If resuming work**: Load the current task context from TASKS.md before proceeding

## Table of Contents
1. [Architecture](ARCHITECTURE.md) - Tech stack, folder structure, infrastructure
2. [Design Tokens](DESIGN.md) - Colors, typography, visual system
3. [UI/UX Patterns](UIUX.md) - Components, interactions, accessibility
4. [Runtime Config](CONFIG.md) - Environment variables, feature flags
5. [Data Model](DATA_MODEL.md) - Database schema, entities, relationships
6. [API Contracts](API.md) - Endpoints, request/response formats, auth
7. [Build & Release](BUILD.md) - Build process, deployment, CI/CD
8. [Testing Guide](TEST.md) - Test strategies, E2E scenarios, coverage
9. [Operational Playbooks](PLAYBOOKS/DEPLOY.md) - Deployment, rollback, monitoring
10. [Contributing](CONTRIBUTING.md) - Code style, PR process, conventions
11. [Error Ledger](ERRORS.md) - Critical P0/P1 error tracking
12. [Task Management](TASKS.md) - Active tasks, phase tracking, context preservation

## Quick Reference
**Project Spec**: `docs/project-spec.md` - Complete project specification
**GitHub Repo**: https://github.com/maphilipps/dressmygravel
**Issues Board**: https://github.com/maphilipps/dressmygravel/issues
**Architecture**: `ARCHITECTURE.md` - System architecture notes
**Journal**: `JOURNAL.md` - Engineering journal
**ADRs**: `doc/architecture/decisions/` - Architecture decision records

### Key Directories (to be created)
- `app/` - Next.js app router pages and API routes
- `components/` - React components (UI, features)
- `lib/` - Business logic, utilities, services
- `data/` - Static data (clothing items, products)
- `public/` - Static assets (images, icons)

## Current State
- [x] GitHub repository created (maphilipps/dressmygravel)
- [x] Project specification documented
- [x] 12 GitHub Issues created with milestones
- [ ] Next.js project setup pending (Issue #1)
- [ ] Core features implementation pending

## Development Workflow
1. **Check GitHub Issues**: Review open issues in current milestone
2. **Create feature branch**: `git checkout -b feature/issue-number-description`
3. **Implement with TDD**: Write tests first, then implementation
4. **Use Shadcn components**: Copy & paste from shadcn/ui when needed
5. **Test locally**: Ensure all tests pass and Lighthouse score >90
6. **Create PR**: Link to issue with "Fixes #XX"
7. **Deploy**: After review and merge to main

## Task Templates
### 1. Implement New UI Component
1. Install Shadcn component: `npx shadcn-ui@latest add [component]`
2. Create wrapper in `components/[feature]/[component].tsx`
3. Add Storybook story in `[component].stories.tsx`
4. Write tests in `[component].test.tsx`
5. Update component documentation

### 2. Add API Endpoint
1. Create route handler in `app/api/[endpoint]/route.ts`
2. Add TypeScript types in `lib/types/[feature].ts`
3. Implement caching strategy in handler
4. Write API tests
5. Document in API specification

### 3. Implement Feature from Issue
1. Read issue requirements and acceptance criteria
2. Create feature branch: `git checkout -b feature/[issue-number]`
3. Write tests first (TDD approach)
4. Implement feature
5. Verify all tests pass
6. Create PR with "Fixes #[issue-number]"

## Anti-Patterns (Avoid These)
❌ **Don't commit API keys or tokens** - Use environment variables
❌ **Don't work on main branch** - Always use feature branches
❌ **Don't skip tests** - TDD is required for reliability
❌ **Don't ignore TypeScript errors** - Fix them properly
❌ **Don't over-engineer** - Keep it simple, use existing solutions
❌ **Don't forget mobile-first** - Always test on mobile devices

## Journal Update Requirements
**IMPORTANT**: Update JOURNAL.md regularly throughout our work sessions:
- After completing any significant feature or fix
- When encountering and resolving errors
- At the end of each work session
- When making architectural decisions
- Format: What/Why/How/Issues/Result structure

## Task Management Integration
**How TASKS.md and JOURNAL.md work together**:
1. **Active Work**: TASKS.md tracks current/incomplete tasks with full context
2. **Completed Work**: When tasks complete, they generate JOURNAL.md entries with `|TASK:ID|` tags
3. **History**: JOURNAL.md preserves complete task history even if Claude Code is reinstalled
4. **Context Recovery**: Search JOURNAL.md for `|TASK:` to see all completed tasks over time
5. **Clean Handoffs**: TASKS.md always shows what needs to be resumed or completed

## Version History
- **v1.0.0** - Initial release
- **v1.1.0** - Feature added (see JOURNAL.md YYYY-MM-DD)  
[Link major versions to journal entries]